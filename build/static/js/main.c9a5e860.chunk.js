(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),u=t(13),c=t.n(u),o=(t(21),t(14)),i=t(2),l=function(e){var n=e.addPerson,t=e.name,r=e.handleNameChange,u=e.number,c=e.handleNumberChange;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"name:",a.a.createElement("input",{value:t,onChange:r})),a.a.createElement("div",null,"number:",a.a.createElement("input",{value:u,onChange:c})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.name,t=e.number,r=e.delPerson;return a.a.createElement("div",null,n," ",t,a.a.createElement("button",{onClick:r},"delete"))},s=function(e){var n=e.personFilter,t=e.handlePersonFilter;return a.a.createElement("div",null,"filter shown with",a.a.createElement("input",{value:n,onChange:t}))},d=function(e){var n=e.message,t=e.type;if(null===n)return null;var r="notification";return"error"===t&&(r+=" error-notification"),"success"===t&&(r+=" success-notification"),a.a.createElement("div",{className:r},n)},f=t(3),h=t.n(f),b="/api/persons",p=function(){return h.a.get(b).then(function(e){return e.data})},v=function(e){return h.a.post(b,e).then(function(e){return e.data})},E=function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then(function(e){return e.data})},g=function(e){return h.a.delete("".concat(b,"/").concat(e)).then(function(e){return e.data})},w=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],c=Object(r.useState)(""),f=Object(i.a)(c,2),h=f[0],b=f[1],w=Object(r.useState)(""),y=Object(i.a)(w,2),j=y[0],O=y[1],C=Object(r.useState)(""),P=Object(i.a)(C,2),k=P[0],N=P[1],S=Object(r.useState)(null),T=Object(i.a)(S,2),D=T[0],F=T[1];Object(r.useEffect)(function(){p().then(function(e){u(e)})},[]);var J=function(e){var n="".concat(e.name," is already added to phonebook, replace the old number with a new one?");if(window.confirm(n)){var r=Object(o.a)({},e,{number:j});E(r.id,r).then(function(e){u(t.map(function(n){return n.id!==r.id?n:e})),b(""),O(""),F({message:"Updated number for ".concat(e.name),type:"success"}),setTimeout(function(){return F(null)},5e3)}).catch(function(e){var n=e.response.data.error;F({message:"error: ".concat(n),type:"error"}),setTimeout(function(){return F(null)},5e3)})}},L=(""===k?t:t.filter(function(e){return e.name.toLowerCase().includes(k.toLowerCase())})).map(function(e){return a.a.createElement(m,{key:e.id,name:e.name,number:e.number,delPerson:function(){return n=e.id,r=e.name,void(window.confirm("Delete ".concat(r))&&g(n).then(function(){u(t.filter(function(e){return e.id!==n})),F({message:"Deleted ".concat(r),type:"success"}),setTimeout(function(){return F(null)},5e3)}).catch(function(e){u(t.filter(function(e){return e.id!==n})),F({message:"".concat(r," was already removed from server"),type:"error"}),setTimeout(function(){return F(null)},5e3)}));var n,r}})});return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(d,{message:D?D.message:null,type:D?D.type:null}),a.a.createElement(s,{filter:k,handlePersonFilter:function(e){return N(e.target.value)}}),a.a.createElement("h3",null,"add a new"),a.a.createElement(l,{addPerson:function(e){e.preventDefault();var n=t.find(function(e){return e.name===h});n?J(n):v({name:h,number:j}).then(function(e){u(t.concat(e)),b(""),O(""),F({message:"Added ".concat(e.name),type:"success"}),setTimeout(function(){return F(null)},5e3)}).catch(function(e){var n=e.response.data.error;F({message:"error: ".concat(n),type:"error"}),setTimeout(function(){return F(null)},5e3)})},name:h,handleNameChange:function(e){return b(e.target.value)},number:j,handleNumberChange:function(e){return O(e.target.value)}}),a.a.createElement("h3",null,"Numbers"),L)};c.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.c9a5e860.chunk.js.map