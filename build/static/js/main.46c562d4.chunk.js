(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),o=(t(21),t(14)),i=t(2),l=function(e){var n=e.addPerson,t=e.name,a=e.handleNameChange,u=e.number,c=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:u,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.name,t=e.number,a=e.delPerson;return r.a.createElement("div",null,n," ",t,r.a.createElement("button",{onClick:a},"delete"))},s=function(e){var n=e.personFilter,t=e.handlePersonFilter;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:n,onChange:t}))},d=function(e){var n=e.message,t=e.type;if(null===n)return null;var a="notification";return"error"===t&&(a+=" error-notification"),"success"===t&&(a+=" success-notification"),r.a.createElement("div",{className:a},n)},f=t(3),b=t.n(f),h="/api/persons",v=function(){return b.a.get(h).then(function(e){return e.data})},p=function(e){return b.a.post(h,e).then(function(e){return e.data})},E=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then(function(e){return e.data})},g=function(e){return b.a.delete("".concat(h,"/").concat(e)).then(function(e){return e.data})},w=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),f=Object(i.a)(c,2),b=f[0],h=f[1],w=Object(a.useState)(""),y=Object(i.a)(w,2),j=y[0],O=y[1],C=Object(a.useState)(""),P=Object(i.a)(C,2),k=P[0],N=P[1],S=Object(a.useState)(null),T=Object(i.a)(S,2),D=T[0],F=T[1];Object(a.useEffect)(function(){v().then(function(e){u(e)})},[]);var J=function(e){var n="".concat(e.name," is already added to phonebook, replace the old number with a new one?");if(window.confirm(n)){var a=Object(o.a)({},e,{number:j});E(a.id,a).then(function(e){u(t.map(function(n){return n.id!==a.id?n:e})),h(""),O(""),F({message:"Updated number for ".concat(e.name),type:"success"}),setTimeout(function(){return F(null)},5e3)}).catch(function(n){u(t.filter(function(e){return e.id!==a.id})),F({message:"".concat(e.name," was already removed from server"),type:"error"}),setTimeout(function(){return F(null)},5e3)})}},L=(""===k?t:t.filter(function(e){return e.name.toLowerCase().includes(k.toLowerCase())})).map(function(e){return r.a.createElement(m,{key:e.id,name:e.name,number:e.number,delPerson:function(){return n=e.id,a=e.name,void(window.confirm("Delete ".concat(a))&&g(n).then(function(){u(t.filter(function(e){return e.id!==n})),F({message:"Deleted ".concat(a),type:"success"}),setTimeout(function(){return F(null)},5e3)}).catch(function(e){u(t.filter(function(e){return e.id!==n})),F({message:"".concat(a," was already removed from server"),type:"error"}),setTimeout(function(){return F(null)},5e3)}));var n,a}})});return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(d,{message:D?D.message:null,type:D?D.type:null}),r.a.createElement(s,{filter:k,handlePersonFilter:function(e){return N(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(l,{addPerson:function(e){e.preventDefault();var n=t.find(function(e){return e.name===b});if(n)J(n);else{var a={name:b,number:j};p(a).then(function(e){u(t.concat(e)),h(""),O(""),F({message:"Added ".concat(e.name),type:"success"}),setTimeout(function(){return F(null)},5e3)}).catch(function(e){F({message:"".concat(a.name," could not be added to server"),type:"error"}),setTimeout(function(){return F(null)},5e3)})}},name:b,handleNameChange:function(e){return h(e.target.value)},number:j,handleNumberChange:function(e){return O(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),L)};c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.46c562d4.chunk.js.map